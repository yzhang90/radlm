cmake_minimum_required(VERSION 2.8.3)
project(cmu_sensor_monitor)

find_package( catkin REQUIRED COMPONENTS message_generation roscpp 
 std_msgs landshark_msgs )

include_directories( include ${catkin_INCLUDE_DIRS} )

add_message_files( DIRECTORY msg FILES AnomalyMsg.msg )

generate_messages( DEPENDENCIES std_msgs geometry_msgs landshark_msgs )

catkin_package( CATKIN_DEPENDS message_runtime landshark_msgs std_msgs roscpp
 DEPENDS ${PROJECT_NAME}_generate_messages
)

add_dependencies( 
${PROJECT_NAME}_generate_messages ${PROJECT_NAME}_generate_messages_cpp 
 ${PROJECT_NAME}_gencpp ${PROJECT_NAME}_genpy )

add_executable(cmu_sensor_monitor 
 src/multi_window_anomaly_monitor.cpp 
 src/multi_window_motion_gps_odo_anomaly_monitor.cpp 
 src/multi_window_landshark_sensor_monitor_main)
target_link_libraries(cmu_sensor_monitor ${catkin_LIBRARIES})

add_executable(
 cmu_monitor_proxy src/monitor_proxy.cpp)
target_link_libraries(cmu_monitor_proxy ${catkin_LIBRARIES})

install( TARGETS 
 cmu_sensor_monitor
 cmu_monitor_proxy
 RUNTIME DESTINATION ${CATKIN_PACKAGE_BIN_DESTINATION}
 ARCHIVE DESTINATION ${CATKIN_PACKAGE_LIB_DESTINATION}
 LIBRARY DESTINATION ${CATKIN_PACKAGE_LIB_DESTINATION}
)

install(DIRECTORY include/${PROJECT_NAME}/
 DESTINATION ${CATKIN_PACKAGE_INCLUDE_DESTINATION}
 FILES_MATCHING PATTERN "*.h"
)

foreach( resource launch )
  install(DIRECTORY ${resource}
    DESTINATION ${CATKIN_PACKAGE_SHARE_DESTINATION}
    PATTERN "*~" EXCLUDE
    )
endforeach()

