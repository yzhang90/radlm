#      Author: Fatma Faruq, Jason Larkin
#      HACMS CMU Team, Advisor Manuela Veloso, SpiralGen, Inc. 

cmake_minimum_required(VERSION 2.8.3)
project(cmu_dwmonitor)

find_package( catkin REQUIRED COMPONENTS message_generation roscpp rospy tf 
 landshark_common landshark_gps landshark_msgs
 std_msgs geometry_msgs nav_msgs sensor_msgs visualization_msgs
)

include_directories( ${catkin_INCLUDE_DIRS} )

add_message_files( DIRECTORY msg FILES obstacle.msg )

generate_messages( DEPENDENCIES std_msgs geometry_msgs )

catkin_package( CATKIN_DEPENDS message_runtime roscpp tf
	landshark_common landshark_gps landshark_msgs 
	geometry_msgs nav_msgs sensor_msgs std_msgs visualization_msgs
	DEPENDS ${PROJECT_NAME}_generate_messages
	LIBRARIES ${PROJECT_NAME}
)

add_dependencies( ${PROJECT_NAME}_generate_messages 
 ${PROJECT_NAME}_gencpp ${PROJECT_NAME}_genpy)

add_library(dwmonitor SHARED src/dwmonitor.o)
SET_SOURCE_FILES_PROPERTIES(
	src/dwmonitor.o
	PROPERTIES
	EXTERNAL_OBJECT true
	GENERATED true
)

SET_TARGET_PROPERTIES(
	dwmonitor
	PROPERTIES
	LINKER_LANGUAGE C
)

add_executable(cmu_dwmonitor src/cmu_dwmonitor.cpp)
target_link_libraries(cmu_dwmonitor dwmonitor ${catkin_LIBRARIES})

